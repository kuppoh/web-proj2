<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/styles.css">
  <script type="module" defer src="https://cdn.jsdelivr.net/gh/imananoosheh/github-contributions-fetch@latest/github_calendar_widget.js"></script>
  <title>Personal Portfolio</title>
</head>

<body>

  <nav>
    <ul>
      <li class="highlight-word">KW.</li>
    </ul>
    <ul class="shift-this-lol">
      <li><a href="#about-me">About Me</a></li>
      <li><a href="#projects">Projects</a></li>
      <li><a href="#github-contributions">GitHub</a></li>
      <li class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">
          <div class="hamburger-menu">
            <div></div>
            <div></div>
            <div></div>
          </div>
        </a>
        <div class="dropdown-content">
          <a href="#about-me">About Me</a>
          <a href="#projects">Projects</a>
          <a href="#github-contributions">GitHub Contributions</a>
          <% if (isAuthenticated) { %>
            <a href="/logout" id="logout-link">Logout</a>
          <% } else { %>
            <a href="/login" id="login-link">Login</a>
          <% } %>
        </div>
      </li>
    </ul>
  </nav>

  <div id="about-me">
    <div class="about-me-content">
      <div class="more-content">
        <h2 class="highlight-word">About Me</h2>
        
        <p class="editable-content" name="aboutMeDescription1">
          <%= portfolioData.aboutMe.description ? portfolioData.aboutMe.description[0] : 'Hey there, my name is Keziah and here are some stuff about me!' %>
        </p>
        
        <p class="editable-content" name="aboutMeDescription2">
          <%= portfolioData.aboutMe.description ? portfolioData.aboutMe.description[1] : 'I am currently a student at the British Columbia Institute of Technology (BCIT), pursuing a diploma in the Computer Information Technology (CIT) program.' %>
        </p>
  
        <% if (isAuthenticated) { %>
          <button class="edit-btn" onclick="openEditAboutModal()">Edit</button>
        <% } %>
      </div>
  
      <img id="profile-pic" src="/images/just-trying-it-out.png" alt="me">
    </div>
  </div>
  
  <!-- Modal for editing -->
  <div id="edit-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeEditModal()">&times;</span>
      <h3>Edit About Me</h3>
      <form id="edit-about-form" method="POST" action="/save-portfolio">
        <label for="aboutMeDescription1">About Me Description 1:</label>
        <textarea name="aboutMeDescription1" id="aboutMeDescription1" rows="4" required><%= portfolioData.aboutMe.description ? portfolioData.aboutMe.description[0] : '' %></textarea>
  
        <label for="aboutMeDescription2">About Me Description 2:</label>
        <textarea name="aboutMeDescription2" id="aboutMeDescription2" rows="4" required><%= portfolioData.aboutMe.description ? portfolioData.aboutMe.description[1] : '' %></textarea>
  
        <button type="submit">Save</button>
      </form>
    </div>
  </div>



  <div id="hobbies">
    <img src="/images/cam1.png" alt="idk">
    <div style="margin-left: 5%;" class="more-content">
      <h2 class="highlight-word editable-content" contenteditable="false">Some Hobbies I love:</h2>
      <% if (isAuthenticated) { %>
        <button class="edit-btn" onclick="openEditHobbiesModal()">Edit</button>
      <% } %>
      <ul>
        <% portfolioData.hobbies.forEach(function(hobby) { %>
          <li class="editable-content" contenteditable="false"><%= hobby %></li>
        <% }); %>
      </ul>
    </div>
  </div>
  

<!-- Modal for editing Hobbies -->
<div id="edit-hobbies-modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeEditModal('hobbies')">&times;</span>
    <h3>Edit Hobbies</h3>
    <form id="edit-hobbies-form" method="POST" action="/save-hobbies">
      <label for="hobbies-description">Hobbies:</label>
      <textarea name="hobbies-description" id="hobbies-description" rows="4" required><%= portfolioData.hobbies.join('\n') %></textarea>
      <button type="submit">Save</button>
    </form>
  </div>
</div>


<div id="projects">
  <div>
    <h2 class="highlight-word">Projects</h2>
    <div class="projects-container">
      <% portfolioData.projects.forEach(function(project) { %>
        <div>
          <h4 class="highlight-word editable-content" contenteditable="false"><%= project.name %></h4>
          <% if (isAuthenticated) { %>
            <button class="edit-btn" onclick="openEditProjectModal(<%= project.projectId %>)">Edit</button>
          <% } %>
          <ul>
            <% project.description.forEach(function(desc) { %>
              <li class="editable-content" contenteditable="false"><%= desc %></li>
            <% }); %>
          </ul>
        </div>

        <!-- Modal for Editing Project -->
        <div id="edit-projects-modal-<%= project.projectId %>" class="modal" style="display:none;">
          <div class="modal-content">
            <span class="close" onclick="closeEditModal(<%= project.projectId %>)">Ã—</span>
            <h3>Edit Project</h3>
            <form id="edit-project-form-<%= project.projectId %>" method="POST" action="/save-project">
              <input type="hidden" name="project-id" id="project-id-<%= project.projectId %>" value="<%= project.projectId %>">
              
              <label for="project-name-<%= project.projectId %>">Project Title:</label>
              <input type="text" name="project-name" id="project-name-<%= project.projectId %>" value="<%= project.name %>" required>
              
              <label for="project-description-<%= project.projectId %>">Project Description:</label>
              <textarea name="project-description" id="project-description-<%= project.projectId %>" rows="4" required><%= project.description.join('\n') %></textarea>
              
              <button type="submit">Save</button>
            </form>
          </div>
        </div>
      <% }); %>
    </div>
  </div>
</div>



  <div id="github-contributions">
    <h2 class="highlight-word">GitHub</h2>
    <p class="editable-content" contenteditable="false">My current activity and contributions on GitHub.</p>
    <% if (isAuthenticated) { %>
      <button class="edit-btn" onclick="toggleEditMode(this)">Edit</button>
    <% } %>
    <div id="calendar-component" username="kuppoh" theme-color="#ae2012" background-color="#161a1d"></div>
  </div>

  <div id="contacts">
    <h2 class="highlight-word">Contacts</h2>
    <div class="contact-details">
      <p><span class="highlight-word editable-content" contenteditable="false">Email:</span> keziah@notreal.com</p>
      <p><span class="highlight-word editable-content" contenteditable="false">Phone:</span> 666-000-6969</p>
    </div>
    <% if (isAuthenticated) { %>
      <button class="edit-btn" onclick="toggleEditMode(this)">Edit</button>
    <% } %>
  </div>
  <script>
    var isAuthenticated = <%= JSON.stringify(isAuthenticated) %>;
  </script>

  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <script src="/js/main.js"></script>
</body>
